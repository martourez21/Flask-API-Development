{"ast":null,"code":"var _jsxFileName = \"/home/martourez/Desktop/Flask-API-Developoment/Flask-API-Development/2_Errors_Starter/frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport './stylesheets/App.css';\nimport FormView from './components/FormView';\nimport Book from './components/Book';\n\nclass App extends Component {\n  constructor(props) {\n    super();\n\n    this.getBooks = () => {\n      $.ajax({\n        url: `/books?page=${this.state.page}`,\n        //TODO: update request URL\n        type: \"GET\",\n        success: result => {\n          this.setState({\n            totalBooks: result.total_books,\n            books: result.books\n          });\n          return;\n        },\n        error: error => {\n          alert('Unable to load books. Please try your request again');\n          return;\n        }\n      });\n    };\n\n    this.deleteBook = id => {\n      if (window.confirm('Are you sure you want to delete the book?')) {\n        $.ajax({\n          url: `/books/${id}`,\n          //TODO: update request URL\n          type: \"DELETE\",\n          success: result => {\n            this.getBooks();\n          },\n          error: error => {\n            alert('Unable to delete the book.');\n            return;\n          }\n        });\n      }\n    };\n\n    this.changeRating = (id, rating) => {\n      let books = [...this.state.books];\n      let targetBook = books.find(book => book.id === id);\n      $.ajax({\n        url: `/books/${id}`,\n        //TODO: update request URL\n        type: \"PATCH\",\n        dataType: 'json',\n        contentType: 'application/json',\n        data: JSON.stringify({\n          'rating': rating\n        }),\n        success: result => {\n          targetBook.rating = rating;\n          this.setState({\n            books\n          });\n        },\n        error: error => {\n          alert('Unable to update the rating.');\n          return;\n        }\n      });\n    };\n\n    this.searchBooks = search => {\n      $.ajax({\n        url: '/books',\n        //TODO: update request URL\n        type: \"POST\",\n        dataType: 'json',\n        contentType: 'application/json',\n        data: JSON.stringify({\n          search: search\n        }),\n        xhrFields: {\n          withCredentials: true\n        },\n        crossDomain: true,\n        success: result => {\n          this.setState({\n            totalBooks: result.total_books,\n            books: result.books,\n            page: 1\n          });\n          document.getElementById(\"search-form\").reset();\n          return;\n        },\n        error: error => {\n          alert('Unable to complete search. Please try your request again');\n          return;\n        }\n      });\n    };\n\n    this.state = {\n      page: 1,\n      totalBooks: 0,\n      books: []\n    };\n  }\n\n  componentDidMount() {\n    this.getBooks();\n  }\n\n  selectPage(num) {\n    this.setState({\n      page: num\n    }, () => this.getBooks());\n  }\n\n  createPagination() {\n    let pageNumbers = [];\n    let maxPage = Math.ceil(this.state.totalBooks / 8);\n\n    for (let i = 1; i <= maxPage; i++) {\n      pageNumbers.push( /*#__PURE__*/React.createElement(\"div\", {\n        key: i,\n        className: `page-num ${i === this.state.page ? 'active' : ''}`,\n        onClick: () => {\n          this.selectPage(i);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 9\n        }\n      }, i));\n    }\n\n    return pageNumbers;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"main-view\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bookshelf-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    }, this.state.books.map(book => /*#__PURE__*/React.createElement(Book, Object.assign({\n      key: book.id,\n      deleteBook: this.deleteBook,\n      changeRating: this.changeRating\n    }, book, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pagination-menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    }, this.createPagination())), /*#__PURE__*/React.createElement(FormView, {\n      searchBooks: this.searchBooks,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"names":["React","Component","$","FormView","Book","App","constructor","props","getBooks","ajax","url","state","page","type","success","result","setState","totalBooks","total_books","books","error","alert","deleteBook","id","window","confirm","changeRating","rating","targetBook","find","book","dataType","contentType","data","JSON","stringify","searchBooks","search","xhrFields","withCredentials","crossDomain","document","getElementById","reset","componentDidMount","selectPage","num","createPagination","pageNumbers","maxPage","Math","ceil","i","push","render","map"],"sources":["/home/martourez/Desktop/Flask-API-Developoment/Flask-API-Development/2_Errors_Starter/frontend/src/App.js"],"sourcesContent":["import React, { Component } from 'react';\nimport $ from 'jquery';\n\nimport './stylesheets/App.css';\nimport FormView from './components/FormView';\nimport Book from './components/Book';\n\n\nclass App extends Component {\n  constructor(props){\n    super();\n    this.state = {\n      page: 1,\n      totalBooks: 0,\n      books: []\n    }\n  }\n\n  getBooks = () => {\n    $.ajax({\n      url: `/books?page=${this.state.page}`, //TODO: update request URL\n      type: \"GET\",\n      success: (result) => {\n        this.setState({\n          totalBooks: result.total_books,\n          books: result.books \n        })\n        return;\n      },\n      error: (error) => {\n        alert('Unable to load books. Please try your request again')\n        return;\n      }\n    })\n  }\n\n  deleteBook = (id) => {\n    if(window.confirm('Are you sure you want to delete the book?')) {\n      $.ajax({\n        url: `/books/${id}`, //TODO: update request URL\n        type: \"DELETE\",\n        success: (result) => {\n          this.getBooks();\n        },\n        error: (error) => {\n          alert('Unable to delete the book.')\n          return;\n        }\n      })\n    }\n  }\n\n  changeRating = (id, rating) => {\n    let books = [...this.state.books]\n    let targetBook = books.find((book) => book.id === id);\n\n    $.ajax({\n      url: `/books/${id}`, //TODO: update request URL\n      type: \"PATCH\",\n      dataType: 'json',\n      contentType: 'application/json',\n      data: JSON.stringify({'rating': rating}),\n      success: (result) => {\n        targetBook.rating = rating\n        this.setState({books})\n      },\n      error: (error) => {\n        alert('Unable to update the rating.')\n        return;\n      }\n    })\n  }\n\n  searchBooks = (search) => {\n    $.ajax({\n      url: '/books', //TODO: update request URL\n      type: \"POST\",\n      dataType: 'json',\n      contentType: 'application/json',\n      data: JSON.stringify({search: search}),\n      xhrFields: {\n        withCredentials: true\n      },\n      crossDomain: true,\n      success: (result) => {\n        this.setState({\n          totalBooks: result.total_books,\n          books: result.books,\n          page: 1\n        })\n        document.getElementById(\"search-form\").reset();\n        return;\n      },\n      error: (error) => {\n        alert('Unable to complete search. Please try your request again')\n        return;\n      }\n    })\n  }\n\n  \n  componentDidMount(){\n    this.getBooks()\n  }\n\n  selectPage(num) {\n    this.setState({page: num}, () => this.getBooks());\n  }\n\n  createPagination(){\n    let pageNumbers = [];\n    let maxPage = Math.ceil(this.state.totalBooks / 8)\n    for (let i = 1; i <= maxPage; i++) {\n      pageNumbers.push(\n        <div\n          key={i}\n          className={`page-num ${i === this.state.page ? 'active' : ''}`}\n          onClick={() => {this.selectPage(i)}}>{i}\n        </div>)\n    }\n    return pageNumbers;\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div id=\"main-view\">\n          <div className=\"bookshelf-container\">\n            {this.state.books.map((book) => (\n              <Book\n                key={book.id}\n                deleteBook={this.deleteBook}\n                changeRating={this.changeRating}\n                {...book}\n              />\n            ))}\n          </div>\n          <div className=\"pagination-menu\">\n              {this.createPagination()}\n          </div>\n        </div>\n        <FormView searchBooks={this.searchBooks}/>\n      </div>\n    );\n\n  }\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}